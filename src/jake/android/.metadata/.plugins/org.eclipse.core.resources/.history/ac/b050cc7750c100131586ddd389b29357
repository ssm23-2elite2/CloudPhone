package com.example.cloudphonesimpletest.util;

public class Util {
	public static class Services{
		/**
		 * Check PassUService is running or not.
		 * @param context Application/Activity's context
		 * @return <code>true</code> if PassUService is running, <code>false</code> otherwise.
		 */
		public static boolean isServiceAliveU(Context context){
			String serviceCls = PassUService.class.getName();
			ActivityManager manager = (ActivityManager)context.getSystemService(Context.ACTIVITY_SERVICE);
			List<RunningServiceInfo> serviceList = manager.getRunningServices(Integer.MAX_VALUE);
			for(RunningServiceInfo info : serviceList){
				if(info.service.getClassName().equals(serviceCls)){
					return true;
				}
			}
			if(D) Log.d(LOG, "PassUService not available.");
			return false;
		}

		/**
		 * Starts PassUService.
		 * @param context Application/Activity's context
		 * @see org.secmem232.passu.android.mouse.PassUService PassUService
		 */
		public static ComponentName startPassUService(Context context, String ip, int port){
			if(!isServiceAliveU(context)){
				if(D) Log.d(LOG, "Starting PassUService..");
				Intent intent = new Intent(context, PassUService.class);
				intent.putExtra("ip", ip);
				intent.putExtra("port", port);
				return context.startService(intent);
			} else {
				return null;
			}
		}
	}
	
}
